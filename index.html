<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>V1.8.0</title>
</head>
<body>
  <h1>Choose a page to open:</h1>
  <button onclick="openPage('https://akazimc.github.io/operationbreaker/Eaglercraft')">WASM-GC Eaglercraft</button>
  <button onclick="openPage('https://akazimc.github.io/operationbreaker/Eaglercraft-JS')">JS Eaglercraft</button>
  <br><br>
  <button onclick="toggleMode()" id="modeBtn">Mode: Open</button>

  <script>
    let mode = "open";   // can be "open" or "cache"
    let cachedWin = null; // store window when in cache mode

    function toggleMode() {
      mode = (mode === "open") ? "cache" : "open";
      document.getElementById("modeBtn").innerText = "Mode: " + (mode === "open" ? "Open" : "Cache");
    }

    function openPage(url) {
      let win;

      if (mode === "cache") {
        // Reuse cached window if it exists and not closed
        if (cachedWin && !cachedWin.closed) {
          win = cachedWin;
          win.document.body.innerHTML = ""; // clear old iframe
        } else {
          cachedWin = window.open("about:blank", "_blank");
          win = cachedWin;
        }
      } else {
        // Always open a new window
        win = window.open("about:blank", "_blank");
      }

      // Set a temporary title while loading
      win.document.title = "Loading...";

      // Style the body
      win.document.body.style.margin = '0';
      win.document.body.style.height = '100%';
      win.document.body.style.overflow = 'hidden';

      // Create and append the iframe
      let iframe = win.document.createElement('iframe');
      iframe.src = url;
      iframe.style.border = 'none';
      iframe.style.width = '100%';
      iframe.style.height = '100%';
      win.document.body.appendChild(iframe);
    }
  </script>
</body>
</html>
